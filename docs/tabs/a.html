<!DOCTYPE html>
<html lang="en" id="all">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev New Tab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&family=Roboto+Mono:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,0..200" rel="stylesheet" />
    <link rel="icon" href="https://static.thenounproject.com/png/1483687-200.png">
    <style>
        /* --- CSS Variables for Theming --- */
        :root {
            /* Light Theme */
            --bg-color: #f8f8f8; /* Very light gray, almost white */
            --text-color: #333333; /* Soft black for text */
            --primary-accent: #6366f1; /* Indigo */
            --secondary-accent: #34d399; /* Mint green */
            --border-color: #e0e0e0; /* Lighter, subtle border */
            --card-bg: #ffffff; /* Pure white cards */
            --input-bg: #f3f3f3; /* Slightly darker input than bg */
            --hover-bg: #e9e9e9; /* Lightest gray for hover */
            --clock-bg: #f0f0f0; /* Soft gray for clock, less distinct */
            --shadow-light: rgba(0, 0, 0, 0.04); /* Even softer shadow */
            --hacker-icon-color: #6366f1;
        }

        [data-theme="dark"] {
            /* Dark Theme */
            --bg-color: #1a1a1a; /* Deeper dark gray */
            --text-color: #e0e0e0; /* Lighter soft white */
            --primary-accent: #818cf8; /* Lighter indigo */
            --secondary-accent: #6ee7b7; /* Lighter green */
            --border-color: #3a3a3a; /* Darker border */
            --card-bg: #222222; /* Darker cards */
            --input-bg: #2c2c2c; /* Darker input */
            --hover-bg: #383838; /* Darker hover */
            --clock-bg: #282828; /* Slightly lighter for clock */
            --shadow-light: rgba(0, 0, 0, 0.15); /* More pronounced in dark */
            --hacker-icon-color: #6ee7b7;
        }

        /* Hacker Theme Overrides (when data-hacker-theme="true") */
        [data-hacker-theme="true"] {
            --bg-color: #0d1117; /* GitHub Dark default background */
            --text-color: #00ff00; /* Neon green */
            --primary-accent: #00ff00; /* Neon green */
            --secondary-accent: #00cc00; /* Slightly darker neon green */
            --border-color: #21262d; /* Darker border */
            --card-bg: #161b22; /* Darker cards */
            --input-bg: #010409; /* Even darker input */
            --hover-bg: #1f6fb23d; /* Subtle blueish hover from GitHub */
            --clock-bg: #161b22;
            --shadow-light: rgba(0, 0, 0, 0.25);
            --hacker-icon-color: #00ff00;
        }

	[data-theme="party"] {
  		--bg-color: linear-gradient(
    			45deg,
    			#ff0000,
    			#ffa500,
    			#ffff00,
    			#00ff00,
    			#0000ff,
    			#4b0082,
    			#ee82ee
  		); /* Example gradient */
  		--text-color: white; /* Or any contrasting color */
  		--card-bg: rgba(255, 255, 255, 0.2); /* Semi-transparent card */
  		/* Add other variables as needed */
	}

	@keyframes disco {
  0% {
    background-color: #ff0000;
  }

  16% {
    background-color: #ffa500;
  }

  33% {
    background-color: #ffff00;
  }

  50% {
    background-color: #00ff00;
  }

  66% {
    background-color: #0000ff;
  }

  83% {
    background-color: #4b0082;
  }

  100% {
    background-color: #ff0000;
  }
}

body[data-theme="party"] {
  animation: disco 5s linear infinite; /* Adjust speed and timing function */
}

        /* --- Base Styles --- */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
        }

        /* --- Reusable Components --- */
        .minimal-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow-light);
            transition: background-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        input, textarea {
            background-color: var(--input-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            border-radius: 8px;
            transition: background-color 0.3s ease-in-out, border-color 0.3s ease-in-out, color 0.3s ease-in-out;
        }
        input:focus, textarea:focus {
            border-color: var(--primary-accent);
            outline: none;
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.15);
        }

        /* Specific style for the search input within the search bar form */
        form.minimal-card input[type="text"] {
            border: none;
            background-color: transparent;
        }

        .icon-button {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: transparent;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
        }
        .icon-button:hover {
            background-color: var(--hover-bg);
            transform: scale(1.05);
        }
        .icon-button:active {
            transform: scale(0.95);
        }
        .icon-button .material-symbols-rounded {
            color: var(--text-color);
            opacity: 0.5;
            transition: opacity 0.2s ease-in-out;
        }
        .icon-button:hover .material-symbols-rounded {
            opacity: 0.9;
        }
        .icon-button.primary-btn {
            background-color: var(--primary-accent);
            color: white;
            border-radius: 8px;
            padding: 8px 16px;
            min-width: fit-content; /* Ensure button doesn't shrink text */
        }
        .icon-button.primary-btn:hover {
            background-color: var(--primary-accent);
            opacity: 0.9;
        }
        .icon-button.primary-btn .material-symbols-rounded {
            filter: none;
            opacity: 1;
            color: white;
        }
        .hacker-icon {
            color: var(--hacker-icon-color);
            opacity: 0.5;
            transition: color 0.3s ease-in-out, opacity 0.2s ease-in-out;
        }
        .icon-button:hover .hacker-icon {
            opacity: 0.9;
        }

        /* --- Clock & Date Styles --- */
        #digitalClock, #dateBox {
            font-family: 'Roboto Mono', monospace;
            font-weight: 300;
            background-color: var(--clock-bg);
            color: var(--text-color);
            border-radius: 8px;
            padding: 8px 14px;
            box-shadow: 0 1px 3px var(--shadow-light);
            cursor: pointer;
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        #digitalClock:hover, #dateBox:hover {
            text-decoration: underline;
            box-shadow: 0 2px 6px var(--shadow-light);
        }

        /* --- Progress Bar Styles --- */
        .progress-bar-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--border-color);
        }
        .progress-bar-bottom {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-accent), var(--primary-accent));
            width: 0%;
            transition: width 0.1s linear;
        }

        /* --- Developer Tools Section (Optional, if you add them back) --- */
        /*
        .dev-tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            width: 100%;
        }

        .dev-tool-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            cursor: pointer;
            text-align: center;
        }

        .dev-tool-card .material-symbols-rounded {
            font-size: 2.5rem;
            color: var(--primary-accent);
            margin-bottom: 0.5rem;
            transition: transform 0.2s ease-in-out, color 0.2s ease-in-out;
        }

        .dev-tool-card:hover .material-symbols-rounded {
            transform: scale(1.1);
            color: var(--secondary-accent);
        }

        .dev-tool-card span.text-sm {
            font-weight: 500;
            color: var(--text-color);
        }
        */

        /* Tool specific styles (Optional, if you add them back) */
        /*
        #jsonFormatterOutput, #base64Output, #urlOutput {
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 150px;
            overflow-y: auto;
            padding: 0.75rem;
            border-radius: 8px;
            background-color: var(--input-bg);
            border: 1px solid var(--border-color);
            font-family: 'Roboto Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-color);
            resize: vertical;
        }
        */
    </style>
</head>
<body class="flex flex-col justify-between items-center h-screen px-6 py-6">

    <div class="w-full flex flex-col items-center gap-6">
        <form action="https://www.google.com/search" method="GET" class="flex items-center w-full max-w-2xl minimal-card h-12 px-5" role="search">
            <label for="search-input" class="sr-only">Search or type a command</label>
            <input type="text" id="search-input" name="q" placeholder="Search..." class="flex-1 bg-transparent outline-none text-base p-2 border-none hover:border-none" />
            <button type="submit" class="icon-button w-2 h-2 p-0 ml-3" aria-label="Search">
                <span class="material-symbols-rounded text-2xl">search</span>
            </button>
        </form>
    </div>

    <div class="w-full flex justify-between items-end p-6">
        <div class="flex flex-col items-start gap-2 text-left">
            <a href="clock.html" class="block" aria-label="View full clock page">
                <div id="digitalClock" class="text-3xl font-normal"></div>
            </a>
            <a href="clock.html" class="block" aria-label="View full clock page">
                <div id="dateBox" class="text-md opacity-80"></div>
            </a>
        </div>

        <div class="flex items-center gap-3">
		    <button id="hackerThemeBtn" class="icon-button" aria-label="Toggle Hacker Theme">
		        <span class="material-symbols-rounded text-xl">terminal</span>
		    </button>
		    <button id="themeToggle" class="icon-button" aria-label="Toggle Theme">
		        <span id="themeIcon" class="material-symbols-rounded text-xl">light_mode</span>
		    </button>
		    <button id="partyThemeBtn" class="icon-button" aria-label="Toggle Party Theme">
  			<span class="material-symbols-rounded text-xl">celebration</span>
		    </button>
		</div>
    </div>

    <div class="progress-bar-container">
        <div id="bottomProgressBar" class="progress-bar-bottom"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const all = document.getElementById("all"); // Represents the <html> element
            const themeToggle = document.getElementById("themeToggle");
            const themeIcon = document.getElementById("themeIcon");
            const hackerThemeBtn = document.getElementById("hackerThemeBtn");
            const digitalClock = document.getElementById("digitalClock");
            const dateBox = document.getElementById("dateBox");
            const bottomProgressBar = document.getElementById('bottomProgressBar');

            // --- Theme Management ---
            const savedTheme = localStorage.getItem('theme');
            const savedHackerTheme = localStorage.getItem('hackerTheme'); // Check for saved hacker theme

            if (savedHackerTheme === 'true') {
                document.documentElement.setAttribute("data-hacker-theme", "true");
                document.documentElement.setAttribute("data-theme", "dark"); // Hacker implies dark base
                themeIcon.textContent = "dark_mode";
            } else if (savedTheme) {
                document.documentElement.setAttribute("data-theme", savedTheme);
                themeIcon.textContent = savedTheme === 'dark' ? "dark_mode" : "light_mode";
            } else {
                document.documentElement.setAttribute("data-theme", "light");
                themeIcon.textContent = "light_mode";
            }

            themeToggle.addEventListener("click", () => {
                const currentTheme = document.documentElement.getAttribute("data-theme");
                const isHackerTheme = document.documentElement.hasAttribute("data-hacker-theme");

                if (isHackerTheme) {
                    // If hacker theme is active, toggle to light theme
                    document.documentElement.removeAttribute("data-hacker-theme");
                    document.documentElement.setAttribute("data-theme", "light");
                    themeIcon.textContent = "light_mode";
                    localStorage.setItem('hackerTheme', 'false');
                    localStorage.setItem('theme', 'light');
                } else {
                    // Otherwise, toggle between light and dark
                    const newTheme = currentTheme === "light" ? "dark" : "light";
                    document.documentElement.setAttribute("data-theme", newTheme);
                    themeIcon.textContent = newTheme === 'dark' ? "dark_mode" : "light_mode";
                    localStorage.setItem('theme', newTheme);
                    localStorage.setItem('hackerTheme', 'false'); // Ensure hacker theme is off
                }
            });

            hackerThemeBtn.addEventListener("click", (e) => {
                e.preventDefault(); // Prevent any default link behavior

                const isHackerTheme = document.documentElement.hasAttribute("data-hacker-theme");

                if (isHackerTheme) {
                    // If hacker theme is active, turn it off and revert to last saved regular theme
                    document.documentElement.removeAttribute("data-hacker-theme");
                    const lastTheme = localStorage.getItem('theme') || 'light';
                    document.documentElement.setAttribute("data-theme", lastTheme);
                    themeIcon.textContent = lastTheme === 'dark' ? "dark_mode" : "light_mode";
                    localStorage.setItem('hackerTheme', 'false');
                } else {
                    // Activate hacker theme
                    document.documentElement.setAttribute("data-hacker-theme", "true");
                    document.documentElement.setAttribute("data-theme", "dark"); // Hacker theme is typically dark
                    themeIcon.textContent = "dark_mode"; // Icon should reflect dark mode
                    localStorage.setItem('hackerTheme', 'true');
                    localStorage.setItem('theme', 'dark'); // Also save base theme as dark
                }
            });


            // --- Clock & Date Functionality ---
            function updateClockAndDate() {
                const now = new Date();
                const hours = now.getHours().toString().padStart(2, "0");
                const minutes = now.getMinutes().toString().padStart(2, "0");
                const seconds = now.getSeconds().toString().padStart(2, "0");
                digitalClock.textContent = `${hours}:${minutes}:${seconds}`;

                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                dateBox.textContent = now.toLocaleDateString(undefined, options);
            }
            setInterval(updateClockAndDate, 1000);
            updateClockAndDate(); // Initial call

            // --- Scheduled Time Progress Bar ---
            // Using actual class/lecture times for a real-world example
            const scheduledTimes = [
                "09:00", // Start of first period
                "09:50", // End of first / Start of second
                "10:40", // End of second / Start of break
                "11:00", // End of break / Start of third
                "11:50", // End of third / Start of fourth
                "12:40", // End of fourth / Start of lunch
                "13:30", // End of lunch / Start of fifth
                "14:20", // End of fifth / Start of sixth
                "15:10", // End of sixth / School dismissal (or last scheduled event)
            ];

            function findNextScheduledTime(currentDate) {
                // Adjust to Papworth Everard timezone if needed, otherwise rely on browser's local time
                for (const time of scheduledTimes) {
                    const [h, m] = time.split(':').map(Number);
                    const scheduledDate = new Date(
                        currentDate.getFullYear(),
                        currentDate.getMonth(),
                        currentDate.getDate(),
                        h, m, 0, 0
                    );
                    if (scheduledDate > currentDate) {
                        return scheduledDate;
                    }
                }
                return null; // No more scheduled times for today
            }

            function findCurrentStartTime(currentDate) {
                let lastTime = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate(), 0, 0, 0); // Default to midnight
                for (const time of scheduledTimes) {
                    const [h, m] = time.split(':').map(Number);
                    const scheduledDate = new Date(
                        currentDate.getFullYear(),
                        currentDate.getMonth(),
                        currentDate.getDate(),
                        h, m, 0
                    );
                    if (scheduledDate <= currentDate) {
                        lastTime = scheduledDate;
                    } else {
                        break; // Times are sorted, so we found the current period's start
                    }
                }
                return lastTime;
            }

            function updateBottomProgressBar() {
                const now = new Date();
                const nextTime = findNextScheduledTime(now);
                const currentStartTime = findCurrentStartTime(now);

                if (nextTime && currentStartTime && nextTime > currentStartTime) {
                    const periodLength = nextTime.getTime() - currentStartTime.getTime();
                    const elapsed = now.getTime() - currentStartTime.getTime();
                    // Ensure progress is not negative or above 100%
                    const progressPercent = Math.min(Math.max((elapsed / periodLength) * 100, 0), 100);
                    bottomProgressBar.style.width = `${progressPercent}%`;
                } else {
                    // If no active period (e.g., before first scheduled time or after last),
                    // reset or fully fill depending on desired behavior.
                    // Here, we reset to 0% if no next time, meaning end of day or before start.
                    bottomProgressBar.style.width = `0%`;
                    // Alternatively, if after the last scheduled time, you might want 100%
                    // if (!nextTime && now >= currentStartTime) {
                    //     bottomProgressBar.style.width = `100%`;
                    // } else {
                    //     bottomProgressBar.style.width = `0%`;
                    // }
                }
            }
            setInterval(updateBottomProgressBar, 1000);
            updateBottomProgressBar(); // Initial call

	    const partyThemeBtn = document.getElementById("partyThemeBtn");

partyThemeBtn.addEventListener("click", (e) => {
  e.preventDefault();

  const currentTheme = document.documentElement.getAttribute("data-theme");

  if (currentTheme === "party") {
    // Revert to the last non-party theme
    const lastTheme = localStorage.getItem("theme") || "light";
    document.documentElement.setAttribute("data-theme", lastTheme);
    localStorage.setItem("theme", lastTheme);
  } else {
    // Activate party theme
    document.documentElement.setAttribute("data-theme", "party");
    localStorage.setItem("theme", "party"); // Save party theme
  }
});

            // Removed: JavaScript Terminal Functionality
            // Removed: Developer Tool Modals JavaScript (JSON, Base64, URL)
        });
    </script>
</body>
</html>
